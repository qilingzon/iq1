import{i as S}from"./index.209Dwdsb.js";import le from"./_astro-entry_vue3-popper.58aiQ8o9.js";import{M as se,C as ae,D as ie,q as N,o as R,r as u,k as D,w as L,a as x,N as ce,i as O,T as de,g as v,j as ue,b as r,u as U,d as M,t as i,c as V,h as Y,F as fe,O as pe,e as me,s as T,n as ve}from"./runtime-dom.esm-bundler.2fhlOL2h.js";import{t as k}from"./translate.PtewfyMF.js";import{s as E}from"./store.HSX0ch5F.js";import{u as W,L as he}from"./Loading.qttdqLuq.js";import{b as J}from"./index.fjZeKS1U.js";/* empty css                        */import{_ as ye}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index._PFTJ3ed.js";function X(l){let e=se(),t=l.subscribe(o=>{e.value=o});return ae()&&ie(t),e}function ge(l){if(Array.isArray(l)){for(var e=0,t=Array(l.length);e<l.length;e++)t[e]=l[e];return t}else return Array.from(l)}var P=!1;if(typeof window<"u"){var G={get passive(){P=!0}};window.addEventListener("testPassive",null,G),window.removeEventListener("testPassive",null,G)}var f=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),c=[],p=!1,F=-1,h=void 0,d=void 0,y=void 0,Z=function(e){return c.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},g=function(e){var t=e||window.event;return Z(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},we=function(e){if(y===void 0){var t=!!e&&e.reserveScrollBarGap===!0,o=window.innerWidth-document.documentElement.clientWidth;if(t&&o>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);y=document.body.style.paddingRight,document.body.style.paddingRight=n+o+"px"}}h===void 0&&(h=document.body.style.overflow,document.body.style.overflow="hidden")},$=function(){y!==void 0&&(document.body.style.paddingRight=y,y=void 0),h!==void 0&&(document.body.style.overflow=h,h=void 0)},be=function(){return window.requestAnimationFrame(function(){if(d===void 0){d={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,o=e.scrollX,n=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-o,setTimeout(function(){return window.requestAnimationFrame(function(){var m=n-window.innerHeight;m&&t>=n&&(document.body.style.top=-(t+m))})},300)}})},ee=function(){if(d!==void 0){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=d.position,document.body.style.top=d.top,document.body.style.left=d.left,window.scrollTo(t,e),d=void 0}},_e=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},Se=function(e,t){var o=e.targetTouches[0].clientY-F;return Z(e.target)?!1:t&&t.scrollTop===0&&o>0||_e(t)&&o<0?g(e):(e.stopPropagation(),!0)},K=function(e,t){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!c.some(function(n){return n.targetElement===e})){var o={targetElement:e,options:t||{}};c=[].concat(ge(c),[o]),f?be():we(t),f&&(e.ontouchstart=function(n){n.targetTouches.length===1&&(F=n.targetTouches[0].clientY)},e.ontouchmove=function(n){n.targetTouches.length===1&&Se(n,e)},p||(document.addEventListener("touchmove",g,P?{passive:!1}:void 0),p=!0))}},xe=function(){f&&(c.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),p&&(document.removeEventListener("touchmove",g,P?{passive:!1}:void 0),p=!1),F=-1),f?ee():$(),c=[]},Q=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}c=c.filter(function(t){return t.targetElement!==e}),f&&(e.ontouchstart=null,e.ontouchmove=null,p&&c.length===0&&(document.removeEventListener("touchmove",g,P?{passive:!1}:void 0),p=!1)),f?ee():$()};const Te={__name:"ContactDialog",props:{contact:{type:Object}},setup(l,{expose:e}){e();const t=l,o=X(E),n=N({email:"",name:"",message:"",phone:""}),{textarea:m,input:s}=J(),w={email:[{type:"email",required:!0}],name:[{type:"string",required:!0}],message:[{type:"string",min:10,required:!0}]},{pass:B,isFinished:I,errorFields:oe}=W(n,w);R(()=>{});const b=u(null),te=u(!1),_=u(!1),C=u(null),A=u(null),j=()=>{E.set(!1)},q=a=>{b.value=a.label,A.value=a.email,C.value=a.slack_id};t.contact.topics.length===1&&q(t.contact.topics[0]);const ne=D(()=>!_.value&&I.value&&B.value&&!!b.value),z=D(()=>({email:n.email,name:n.name,topicChannel:C.value,topicEmail:A.value,message:`
Topic:  ${b.value}\r

Name: ${n.name}\r

Phone: ${n.phone}\r

Email: ${n.email}\r

Message: \r
${n.message}\r
           `})),re=()=>{_.value=!0,t.contact.provider&&fetch(`/api/contact-${t.contact.provider}`,{method:"POST",body:JSON.stringify(z.value),headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{a.status==="ok"?(S.success(k("contact_thanks")),n.email="",n.name="",n.phone="",n.message="",s.value="",j()):S.error(k("contact_error"))}).catch(a=>{console.log("error",a),S.error(k("contact_error"))}).finally(()=>{_.value=!1})};L(o,a=>{a?K(document.body):Q(document.body)},{immediate:!1}),L(s,a=>{n.message=a},{immediate:!1});const H={props:t,$show:o,form:n,textarea:m,input:s,rules:w,pass:B,isFinished:I,errorFields:oe,topic:b,showPopper:te,loading:_,topicChannel:C,topicEmail:A,hide:j,setTopic:q,canSubmit:ne,mailData:z,submit:re,ref:u,watch:L,onMounted:R,reactive:N,computed:D,get t(){return k},get useStore(){return X},get showContact(){return E},get useAsyncValidator(){return W},get useTextareaAutosize(){return J},Loading:he,get toast(){return S},get disableBodyScroll(){return K},get enableBodyScroll(){return Q},get clearAllBodyScrollLocks(){return xe},get Popper(){return le}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}},ke={class:"surface-base dialog__inner dialog-grid relative overflow-hidden rounded-2xl shadow-xl"},Pe={class:"overflow-hidden md:block"},Be={class:"hide-scrollbar dialog__content relative overflow-hidden p-8 md:p-14"},Ce={class:"grid gap-4 pb-8"},Ae={class:"title-sm"},De={key:0,class:"input-group z-20 w-full"},Le=["onClick"],Oe={class:"peer-placeholder-shown:left-4 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-9 peer-focus:scale-75 peer-focus:text-primary"},Me={class:"input-group"},Ve={class:"peer-placeholder-shown:left-4 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-9 peer-focus:scale-75 peer-focus:text-primary"},Ee={class:"input-group"},Fe={class:"peer-placeholder-shown:left-4 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-9 peer-focus:scale-75 peer-focus:text-primary"},Ie={class:"input-group"},je={class:"peer-placeholder-shown:left-4 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-9 peer-focus:scale-75 peer-focus:text-primary"},qe={class:"input-group"},ze={class:"peer-placeholder-shown:left-4 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-9 peer-focus:scale-75 peer-focus:text-primary"},He={class:"pointer-events-none right-5 mb-14 flex translate-y-10 justify-end md:sticky md:bottom-0"},Ne=["disabled"];function Re(l,e,t,o,n,m){return x(),ce(de,{name:"fade"},{default:O(()=>[v(r("div",{class:"bg-dark-blur z-1000 dialog pointer-events-auto fixed inset-0 grid w-full cursor-pointer place-items-center",onClick:e[7]||(e[7]=s=>o.hide())},[r("div",{onClick:e[6]||(e[6]=U(()=>{},["stop"])),class:"container-md relative"},[r("div",ke,[r("div",Pe,[M(l.$slots,"image")]),r("div",Be,[r("form",{onSubmit:U(o.submit,["prevent"]),class:"grid gap-8"},[r("div",Ce,[r("h2",Ae,i(t.contact?.title),1),M(l.$slots,"content")]),t.contact.topics.length>1?(x(),V("div",De,[Y(o.Popper,{placement:"bottom-start",offsetDistance:"1",show:o.showPopper,class:"w-full"},{content:O(()=>[r("ul",null,[(x(!0),V(fe,null,pe(t.contact.topics,(s,w)=>(x(),V("li",{key:w,class:ve(o.topic==s.label?"bg-dark bg-opacity-10":"")},[r("button",{type:"button",class:"w-full p-2 text-left hover:bg-dark hover:bg-opacity-10",onClick:B=>{o.setTopic(s),o.showPopper=!1}},i(s.label),9,Le)],2))),128))])]),default:O(()=>[r("button",{type:"button",onClick:e[0]||(e[0]=s=>o.showPopper=!o.showPopper),class:"select surface-overlay w-full text-left"},i(o.topic?o.topic:o.t("select")),1)]),_:1},8,["show"]),r("label",Oe,i(o.t("topic"))+" *",1)])):me("",!0),r("div",Me,[v(r("input",{type:"text",name:"name",placeholder:" ",class:"surface-overlay peer","onUpdate:modelValue":e[1]||(e[1]=s=>o.form.name=s)},null,512),[[T,o.form.name]]),r("label",Ve,i(o.t("name"))+" *",1)]),r("div",Ee,[v(r("input",{type:"email",name:"email",placeholder:" ",class:"surface-overlay peer","onUpdate:modelValue":e[2]||(e[2]=s=>o.form.email=s)},null,512),[[T,o.form.email]]),r("label",Fe,i(o.t("email"))+" *",1)]),r("div",Ie,[v(r("input",{type:"text",name:"phone",placeholder:" ",class:"surface-overlay peer","onUpdate:modelValue":e[3]||(e[3]=s=>o.form.phone=s)},null,512),[[T,o.form.phone]]),r("label",je,i(o.t("phone")),1)]),r("div",qe,[v(r("textarea",{class:"surface-overlay peer",name:"message",id:"",placeholder:" ",cols:"30",rows:"2",ref:"textarea","onUpdate:modelValue":e[4]||(e[4]=s=>o.input=s)},null,512),[[T,o.input]]),r("label",ze,i(o.t("message"))+" *",1)]),r("div",He,[r("button",{class:"btn surface-primary pointer-events-auto",type:"submit",disabled:!o.canSubmit},i(o.t("submit")),9,Ne)]),Y(o.Loading,{loading:o.loading},null,8,["loading"])],32)])]),r("button",{class:"btn btn-icon surface-dark btn-absolute -right-3 -top-3 z-10",onClick:e[5]||(e[5]=s=>o.hide())},[M(l.$slots,"default")])])],512),[[ue,o.$show]])]),_:3})}const eo=ye(Te,[["render",Re]]);export{eo as default};
